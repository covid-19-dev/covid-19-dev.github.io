<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>COVID-19 Analytics</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    
    <script src="https://use.fontawesome.com/beed62a6a7.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.0-rc.1/dist/js.cookie.min.js"></script>
    
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML">
    </script>
    
    <style>
       .floating_box {
        width: 115px;
        position: fixed;
        top: 0px;
        height: 30px;
        background-color: white;
      }
      
       .highlight { color: #FF0000; }
    </style>
    
  </head>
  <body>
    <section class="page-header">
      <h1 class="">COVID-19 Analytics (Data up to 20 March 2022)</h1>
<!--       <h1 class="project-name"> COVID-19 Analytics </h1> -->
<!--       <h2 class="project-tagline">Regular System Maintenance!!</h2> -->
    </section>

    <section class="main-content">
      <!-- <h3><a id="covid-19-analytics" class="anchor" href="#covid-19-analytics" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>COVID-19 Analytics</h3> -->
      
      <p>
        This dashboard presents the latest pandemic risk assessment using the methodology in 
        “On Topological Properties of COVID-19: Predicting and Assessing Pandemic Risk with Network Statistics”. <br />
        Ref: <a href= "https://www.nature.com/articles/s41598-021-84094-z" target="_blank">https://www.nature.com/articles/s41598-021-84094-z</a>
      </p>
      
      <p>
        The below plots show the time series evolution of the network statistics of the dynamic pandemic networks of COVID-19.
      </p>

      <iframe id="dashboard_netStat" src="https://7bc6-143-89-132-35.ngrok.io" width="100%" height="720" style=""></iframe>
      
      <p>
        The statistics presented below include the preparedness risk score (PRS) denoted by \(S_{1t}\), 
        the severity risk score (SRS) denoted by \(S_{2t}\), the respective risk contributions, denoted by \(f_{it}\) and \(g_{it}\), 
        of each country and of each WHO’s region: Africa, America, Asia, Eastern Mediterranean and Europe.   
      </p>
      
      <p>
        When using the proposed risk scores and risk contributions, please note the followings.
        <ul>
          <li>Select \(S_{1t}\) if PRS for preparedness is needed.  Select \(S_{2t}\) if SRS for severity assessment is needed.</li>
          <li>Then the corresponding risk contributions, \(f_{it}\) (if \(S_{1t}\) is selected), or \(g_{it}\) (if \(S_{2t}\) is selected) will be shown in other figures.</li>
        </ul>
      <p>
      
        <h3 class="highlight">Summary findings:</h4>
      
      <ul>
        <li class="highlight">The SRS started increasing in November 2021 before the widespread of Omicron.</li>
        <li class="highlight">The SRS climbed to the peak of more than 1.8 in early 2022 due to the spreading of the Omicron variant.</li>
        <li class="highlight">In June 2022, the SRS stayed at a level of around 0.2 after the great impact of Omicron in many countries.</li>
      </ul>
        
      <!--<iframe src="xxxxxxx" width="100%" height="1000" style="border:none;"></iframe>-->
      <!--<iframe id="dashboard" src="https://a705445fd61e.ngrok.io" width="100%" height="2400" style=""></iframe>-->
      <iframe id="dashboard" src="https://669e-143-89-132-35.ngrok.io" width="100%" height="3000" style=""></iframe>

      <footer class="site-footer">
        <span class="site-footer-credits"
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              Updated at <span id= "updated_at">
        </span>
        <span class="site-footer-credits">
          <i class="fa fa-archive" aria-hidden="true"></i>
          <span id= "app_version">
        </span>  <br />

      </footer>

    </section>
    
    <div class="floating_box">
      <a href="javascript:void(0)" onclick="reload_iframe()">Click to Reload</a>
    </div>

  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-172410617-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-172410617-1');
    </script>

    <script>
      const headers = new Headers()
      headers.append("Content-Type", "application/json")

      const body = {"message":"Welcome to COVID-19 dashboard", "dashboard": "Worldx2"}

      const options = {
        method: "POST",
        headers,
        mode: "cors",
        body: JSON.stringify(body),
      }

      fetch("https://ef7cbd86416f709430f96140ca02050f.m.pipedream.net", options).then(response => {
        console.log(response)
      }).catch(err => {
        console.error("[error] " + err.message)
      })
    </script>
    
    <script>
      // alert("Today will have regular system maintenance. This dashboard will be affected.")
    </script>
    

    <script>
      // var d = new Date();
      var d = new Date('2023-03-23 16:48:00').toString();
      document.querySelector("#updated_at").innerHTML = d;
      document.querySelector("#app_version").innerHTML = "Ver 13.20.1";
    </script>
    
    <script>
      var _theframe_dashboard = document.getElementById("dashboard");
      _theframe_dashboard.contentWindow.location.href = _theframe_dashboard.src;
      
      function reload_iframe() {
        document.getElementById('dashboard_netStat').src += '';
        document.getElementById('dashboard').src += '';
        
        // --------------------------------
        
        const headers = new Headers()
        headers.append("Content-Type", "application/json")

        const body = {"message":"Welcome to COVID-19 dashboard", "dashboard": "Worldx2.reload"}

        const options = {
          method: "POST",
          headers,
          mode: "cors",
          body: JSON.stringify(body),
        }

        fetch("https://ef7cbd86416f709430f96140ca02050f.m.pipedream.net", options).then(response => {
          console.log(response)
        }).catch(err => {
          console.error("[error] " + err.message)
        })
      }
      
      // --------------------------------------------------
      
      window.addEventListener("message",function (e) { 
        
             // Set Cookies for custom configs --------------------
            var _expires_in_days = 365; // 365 days
            var _SameSite = "Lax";
            var _target_domain = window.location.hostname;
                  

            /*Check if the iframe website is sending the message*/
            if(e.origin === document.getElementById("dashboard").getAttribute("src")){ 

              var tmp_data = JSON.parse(e.data);
                
              document.querySelector("#dashboard").contentWindow.postMessage(tmp_data, document.querySelector("#dashboard").src);
              
              if (tmp_data.cov_weight_type != undefined) {
                window.Cookies.set("cov_weight_type", tmp_data.cov_weight_type, { 
                  expires: _expires_in_days, 
                  domain: _target_domain,
                  SameSite: _SameSite
                });
                
                // setCookie('cov_weight_type', tmp_data.cov_weight_type, 365);
                console.log("set cookie: " + "cov_weight_type");
              }
              
              if (tmp_data.cov_WHO_Region != undefined) {
                window.Cookies.set("cov_WHO_Region", tmp_data.cov_WHO_Region, { 
                  expires: _expires_in_days, 
                  domain: _target_domain,
                  SameSite: _SameSite
                });
                
                // setCookie('cov_WHO_Region', tmp_data.cov_WHO_Region, 365);
                console.log("set cookie: " + "cov_WHO_Region");
              }
              
              if (tmp_data.cov_sel_Country_EN != undefined) {
                window.Cookies.set("cov_sel_Country_EN", tmp_data.cov_sel_Country_EN, { 
                  expires: _expires_in_days, 
                  domain: _target_domain,
                  SameSite: _SameSite
                });
                
                // setCookie('cov_sel_Country_EN', tmp_data.cov_sel_Country_EN, 365);
                console.log("set cookie: " + "cov_sel_Country_EN");
              }
              
            }
    },false);
      
      
    </script>
    
  </body>
</html>
